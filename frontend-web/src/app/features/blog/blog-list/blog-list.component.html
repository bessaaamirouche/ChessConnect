<div class="blog">
  <!-- Navbar -->
  <nav class="nav">
    <div class="nav__container">
      <a routerLink="/" class="nav__logo">
        <img src="assets/logo.png" alt="myChess" class="nav__logo-img">
      </a>

      <!-- Mobile hamburger -->
      <button class="nav__hamburger" [class.active]="mobileMenuOpen()" (click)="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <!-- Mobile menu overlay -->
      <div class="nav__mobile-overlay" [class.active]="mobileMenuOpen()" (click)="closeMobileMenu()"></div>

      <!-- Desktop Pill Tabs Navigation -->
      <div class="nav__pills">
        <a routerLink="/" class="nav__pill">{{ 'nav.home' | translate }}</a>
        <a routerLink="/teachers" class="nav__pill">{{ 'teachers.title' | translate }}</a>
        <a routerLink="/blog" class="nav__pill nav__pill--active">{{ 'blog.title' | translate }}</a>
        @if (authService.isAuthenticated()) {
          <a routerLink="/dashboard" class="nav__pill">{{ 'sidebar.dashboard' | translate }}</a>
        } @else {
          <a routerLink="/login" class="nav__pill">{{ 'nav.login' | translate }}</a>
          <a routerLink="/register" class="nav__pill">{{ 'nav.signup' | translate }}</a>
        }
      </div>

      <!-- Mobile Drawer Menu -->
      <div class="nav__links" [class.active]="mobileMenuOpen()">
        <a routerLink="/" (click)="closeMobileMenu()">{{ 'nav.home' | translate }}</a>
        <a routerLink="/teachers" (click)="closeMobileMenu()">{{ 'teachers.title' | translate }}</a>
        <a routerLink="/blog" (click)="closeMobileMenu()">{{ 'blog.title' | translate }}</a>

        <!-- Mobile-only auth buttons -->
        <div class="nav__mobile-actions">
          @if (authService.isAuthenticated()) {
            <a routerLink="/dashboard" class="nav__btn nav__btn--primary" (click)="closeMobileMenu()">{{ 'sidebar.dashboard' | translate }}</a>
          } @else {
            <a routerLink="/login" class="nav__btn nav__btn--ghost" (click)="closeMobileMenu()">{{ 'nav.login' | translate }}</a>
            <a routerLink="/register" class="nav__btn nav__btn--primary" (click)="closeMobileMenu()">{{ 'nav.signup' | translate }}</a>
          }
        </div>
      </div>
    </div>
  </nav>

  <!-- Header -->
  <header class="blog-header">
    <div class="blog-header__container">
      <h1 class="blog-header__title" appScrollReveal="fade-up">{{ 'blog.title' | translate }}</h1>
      <p class="blog-header__subtitle" appScrollReveal="fade-up" [revealDelay]="100">
        {{ 'blog.subtitle' | translate }}
      </p>
    </div>
  </header>

  <!-- Categories Filter -->
  <section class="categories" appScrollReveal="fade-up" [revealDelay]="200">
    <div class="categories__container">
      <div class="categories__pills">
        <button
          class="category-btn"
          [class.active]="selectedCategory() === null"
          (click)="selectCategory(null)"
        >
          {{ 'blog.categories.all' | translate }}
        </button>
        @for (category of categories(); track category) {
          <button
            class="category-btn"
            [class.active]="selectedCategory() === category"
            (click)="selectCategory(category)"
          >
            {{ getCategoryLabel(category) }}
          </button>
        }
      </div>
    </div>
  </section>

  <!-- Articles Grid -->
  <main class="articles-section">
    <div class="articles-container">
      @if (loading()) {
        <div class="loading">
          <div class="loading__spinner"></div>
          <p>{{ 'blog.loading' | translate }}</p>
        </div>
      } @else if (articles().length === 0) {
        <div class="empty-state">
          <p>{{ 'blog.empty.title' | translate }}</p>
        </div>
      } @else {
        <div class="articles-grid" appStaggerReveal>
          @for (article of articles(); track article.id; let i = $index) {
            <article class="article-card" appScrollReveal="fade-up" [revealDelay]="i * 100">
              <a [routerLink]="['/blog', article.slug]" class="article-card__link">
                @if (article.coverImage) {
                  <div class="article-card__image">
                    <img [src]="article.coverImage" [alt]="article.title" loading="lazy">
                  </div>
                }
                <div class="article-card__content">
                  <span
                    class="article-card__category"
                    [style.background-color]="getCategoryColor(article.category)"
                  >
                    {{ getCategoryLabel(article.category) }}
                  </span>
                  <h2 class="article-card__title">{{ article.title }}</h2>
                  <p class="article-card__excerpt">{{ article.excerpt }}</p>
                  <div class="article-card__meta">
                    <span class="article-card__date">{{ formatDate(article.publishedAt) }}</span>
                    <span class="article-card__reading">
                      <ng-icon name="heroClock" size="14"></ng-icon>
                      {{ article.readingTimeMinutes }} min
                    </span>
                  </div>
                </div>
              </a>
            </article>
          }
        </div>

        <!-- Pagination -->
        @if (totalPages() > 1) {
          <nav class="pagination" appScrollReveal="fade-up">
            <button
              class="pagination__btn"
              [disabled]="currentPage() === 0"
              (click)="goToPage(currentPage() - 1)"
            >
              <ng-icon name="heroArrowLeft" size="18"></ng-icon>
              {{ 'blog.pagination.previous' | translate }}
            </button>

            <div class="pagination__pages">
              @for (page of [].constructor(totalPages()); track $index) {
                <button
                  class="pagination__page"
                  [class.active]="currentPage() === $index"
                  (click)="goToPage($index)"
                >
                  {{ $index + 1 }}
                </button>
              }
            </div>

            <button
              class="pagination__btn"
              [disabled]="currentPage() === totalPages() - 1"
              (click)="goToPage(currentPage() + 1)"
            >
              {{ 'blog.pagination.next' | translate }}
              <ng-icon name="heroArrowRight" size="18"></ng-icon>
            </button>
          </nav>
        }
      }
    </div>
  </main>

  <!-- Footer -->
  <footer class="blog-footer">
    <div class="blog-footer__container">
      <p>&copy; 2026 {{ 'blog.footer.copyright' | translate }}</p>
      <a routerLink="/">{{ 'blog.footer.backToHome' | translate }}</a>
    </div>
  </footer>
</div>
