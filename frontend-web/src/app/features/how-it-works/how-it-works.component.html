<div class="legal-page">
  <!-- Navbar -->
  <nav class="nav">
    <div class="nav__container">
      <a routerLink="/" class="nav__logo">
        <img src="assets/logo.png" alt="myChess" class="nav__logo-img">
      </a>

      <!-- Mobile hamburger -->
      <button class="nav__hamburger" [class.active]="mobileMenuOpen()" (click)="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <!-- Mobile menu overlay -->
      <div class="nav__mobile-overlay" [class.active]="mobileMenuOpen()" (click)="closeMobileMenu()"></div>

      <!-- Desktop Pill Tabs Navigation -->
      <div class="nav__pills">
        <a routerLink="/" class="nav__pill">Accueil</a>
        <a routerLink="/teachers" class="nav__pill">Nos coachs</a>
        <a routerLink="/blog" class="nav__pill">Blog</a>
        @if (authService.isAuthenticated()) {
          <a routerLink="/dashboard" class="nav__pill">Mon Espace</a>
        } @else {
          <a routerLink="/login" class="nav__pill">S'identifier</a>
          <a routerLink="/register" class="nav__pill">S'inscrire</a>
        }
      </div>

      <!-- Mobile Drawer Menu -->
      <div class="nav__links" [class.active]="mobileMenuOpen()">
        <a routerLink="/" (click)="closeMobileMenu()">Accueil</a>
        <a routerLink="/teachers" (click)="closeMobileMenu()">Nos coachs</a>
        <a routerLink="/blog" (click)="closeMobileMenu()">Blog</a>

        <div class="nav__mobile-actions">
          @if (authService.isAuthenticated()) {
            <a routerLink="/dashboard" class="nav__btn nav__btn--primary" (click)="closeMobileMenu()">Mon Espace</a>
          } @else {
            <a routerLink="/login" class="nav__btn nav__btn--ghost" (click)="closeMobileMenu()">S'identifier</a>
            <a routerLink="/register" class="nav__btn nav__btn--primary" (click)="closeMobileMenu()">S'inscrire</a>
          }
        </div>
      </div>
    </div>
  </nav>

  <!-- Header -->
  <header class="legal-header">
    <div class="legal-header__content">
      <h1 class="legal-header__title">Comment ca marche ?</h1>
      <p class="legal-header__subtitle">Tout ce que vous devez savoir pour profiter pleinement de mychess</p>
    </div>
  </header>

  <!-- Content -->
  <main class="legal-content">
    <div class="legal-content__container">
      <article class="prose">

        <!-- Section Joueurs -->
        <section class="role-section">
          <div class="role-badge role-badge--player">Joueur</div>
          <h2>Guide pour les joueurs</h2>

          <h3>1. Trouver un coach</h3>
          <p>Parcourez notre liste de coachs qualifies sur la page <a routerLink="/teachers">Nos coachs</a>. Chaque profil affiche :</p>
          <ul>
            <li>Le tarif horaire du coach</li>
            <li>Sa note moyenne et les avis des autres eleves</li>
            <li>Son niveau et sa specialite</li>
            <li>Sa disponibilite (pastille verte = en ligne)</li>
          </ul>

          <h3>2. Ajouter un coach en favori</h3>
          <p>Lorsque vous trouvez un coach qui vous plait :</p>
          <ul>
            <li>Cliquez sur le bouton <strong>"Ajouter aux favoris"</strong> sur son profil</li>
            <li>Activez l'option <strong>"Me notifier des nouveaux creneaux"</strong></li>
            <li>Vous retrouverez vos coachs favoris dans votre profil</li>
          </ul>

          <h3>3. Recevoir les notifications</h3>
          <div class="info-box info-box--premium">
            <div class="info-box__icon">&#9733;</div>
            <div class="info-box__content">
              <strong>Fonctionnalite Premium</strong>
              <p>Les notifications par email pour les nouveaux creneaux de vos coachs favoris sont reservees aux abonnes Premium (4,99&#8364;/mois).</p>
            </div>
          </div>
          <p>En tant qu'abonne Premium, des qu'un de vos coachs favoris publie une nouvelle disponibilite, vous recevez immediatement un email avec :</p>
          <ul>
            <li>Le nom du coach</li>
            <li>Les details du creneau (jour, heure)</li>
            <li>Un lien direct pour reserver</li>
          </ul>

          <h3>4. Acces prioritaire aux creneaux</h3>
          <div class="info-box info-box--premium">
            <div class="info-box__icon">&#9733;</div>
            <div class="info-box__content">
              <strong>Avantage Premium</strong>
              <p>Les abonnes Premium voient les nouveaux creneaux <strong>24 heures avant</strong> les autres joueurs.</p>
            </div>
          </div>

          <h3>5. Reserver un cours</h3>
          <p>Pour reserver :</p>
          <ul>
            <li>Allez sur le profil du coach ou cliquez sur "Reserver" depuis l'email</li>
            <li>Selectionnez un creneau disponible</li>
            <li>Payez via Stripe ou utilisez votre solde portefeuille</li>
            <li>Le coach recoit votre demande et confirme le cours</li>
          </ul>

          <h3>6. Premier cours offert</h3>
          <p>Nouveau sur mychess ? Votre premier cours est <strong>100% gratuit</strong> ! Reservez sans payer pour decouvrir la plateforme.</p>
        </section>

        <!-- Section Coachs -->
        <section class="role-section">
          <div class="role-badge role-badge--coach">Coach</div>
          <h2>Guide pour les coachs</h2>

          <h3>1. Creer vos disponibilites</h3>
          <p>Depuis votre espace <a routerLink="/availability">Mes Disponibilites</a> :</p>
          <ul>
            <li>Cliquez sur <strong>"Ajouter une disponibilite"</strong></li>
            <li>Choisissez le jour et les horaires (minimum 1 heure)</li>
            <li>Optez pour un creneau <strong>ponctuel</strong> ou <strong>recurrent</strong> (chaque semaine)</li>
            <li>Enregistrez : vos creneaux sont immediatement visibles</li>
          </ul>

          <h3>2. Notification automatique de vos eleves</h3>
          <p>Des que vous publiez une nouvelle disponibilite :</p>
          <ul>
            <li>Tous les joueurs qui vous ont en <strong>favori</strong> avec les notifications activees</li>
            <li>Et qui sont abonnes <strong>Premium</strong></li>
            <li>Recoivent automatiquement un email les informant du nouveau creneau</li>
          </ul>
          <div class="info-box info-box--tip">
            <div class="info-box__icon">&#128161;</div>
            <div class="info-box__content">
              <strong>Conseil</strong>
              <p>Publiez vos disponibilites regulierement pour fideliser vos eleves Premium. Ils seront les premiers informes !</p>
            </div>
          </div>

          <h3>3. Gerer les reservations</h3>
          <p>Quand un eleve reserve :</p>
          <ul>
            <li>Vous recevez une notification</li>
            <li>Vous avez <strong>24 heures</strong> pour confirmer le cours</li>
            <li>Si vous ne confirmez pas, le cours est annule et l'eleve rembourse</li>
          </ul>

          <h3>4. Donner le cours</h3>
          <p>A l'heure du cours :</p>
          <ul>
            <li>Cliquez sur <strong>"Rejoindre le cours"</strong> dans Mes Cours</li>
            <li>La visioconference Jitsi demarre automatiquement</li>
            <li>A la fin, marquez le cours comme <strong>termine</strong></li>
          </ul>

          <h3>5. Recevoir vos paiements</h3>
          <p>Configurez votre compte Stripe Connect dans les parametres pour recevoir vos gains directement sur votre compte bancaire.</p>
        </section>

        <!-- Section Recapitulatif -->
        <section>
          <h2>Recapitulatif des notifications</h2>
          <table>
            <thead>
              <tr>
                <th>Evenement</th>
                <th>Qui est notifie</th>
                <th>Condition</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Nouveau creneau publie</td>
                <td>Joueurs ayant le coach en favori</td>
                <td>Abonnement Premium + Notifications activees</td>
              </tr>
              <tr>
                <td>Reservation d'un cours</td>
                <td>Le coach</td>
                <td>Aucune</td>
              </tr>
              <tr>
                <td>Confirmation du cours</td>
                <td>Le joueur</td>
                <td>Aucune</td>
              </tr>
              <tr>
                <td>Rappel 1h avant le cours</td>
                <td>Joueur et Coach</td>
                <td>Rappels email actives dans les parametres</td>
              </tr>
              <tr>
                <td>Annulation d'un cours</td>
                <td>L'autre partie</td>
                <td>Aucune</td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- Section Abonnement Premium -->
        <section>
          <h2>Avantages Premium</h2>
          <p>L'abonnement Premium a <strong>4,99&#8364;/mois</strong> vous offre :</p>
          <ul>
            <li><strong>Notifications prioritaires</strong> : recevez un email des qu'un coach favori publie un creneau</li>
            <li><strong>Acces anticipe</strong> : voyez les nouveaux creneaux 24h avant les autres</li>
            <li><strong>Revisionnage</strong> : acces aux enregistrements video de vos cours</li>
            <li><strong>Entrainement</strong> : jouez contre myChessBot apres vos cours</li>
            <li><strong>Badge Premium</strong> : un badge dore sur votre profil</li>
          </ul>
          <div class="cta-box">
            <a routerLink="/subscription" class="cta-button">Decouvrir Premium</a>
          </div>
        </section>

        <!-- Section Questions -->
        <section>
          <h2>Questions frequentes</h2>

          <h3>Pourquoi je ne recois pas de notifications ?</h3>
          <p>Verifiez que :</p>
          <ul>
            <li>Vous avez ajoute le coach en <strong>favori</strong></li>
            <li>Vous avez active <strong>"Me notifier des nouveaux creneaux"</strong></li>
            <li>Vous etes abonne <strong>Premium</strong></li>
            <li>Votre adresse email est valide et les emails ne sont pas en spam</li>
          </ul>

          <h3>Comment activer les notifications pour un coach ?</h3>
          <p>Allez sur le profil du coach, cliquez sur "Ajouter aux favoris", puis activez l'option de notification.</p>

          <h3>Les notifications sont-elles gratuites ?</h3>
          <p>Les notifications par email pour les nouveaux creneaux sont reservees aux abonnes Premium. Les notifications de confirmation et de rappel sont gratuites pour tous.</p>
        </section>

      </article>
    </div>
  </main>

  <!-- Footer -->
  <footer class="legal-footer">
    <div class="legal-footer__container">
      <p>&copy; 2026 mychess. Tous droits reserves.</p>
      <div class="legal-footer__links">
        <a routerLink="/terms">CGU</a>
        <a routerLink="/privacy">Confidentialite</a>
        <a routerLink="/legal-notice">Mentions legales</a>
      </div>
    </div>
  </footer>
</div>
